<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>3D Runner - Solo</title>
<style>
  body { margin:0; display:flex; align-items:center; justify-content:center; height:100vh; background:#0b1020; overflow:hidden; }
  canvas { border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,0.6); background:linear-gradient(180deg,#071127,#0b1020); }
</style>
</head>
<body>
<canvas id="game" width="400" height="640"></canvas>
<script>
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');

let laneCount=3;
let player={lane:1,bob:0};
let tick=0;
let running=true;

// generate player sprite
function createCubeSprite(color1,color2,color3,size=40){
  const c=document.createElement('canvas');
  c.width=size; c.height=size;
  const ctx=c.getContext('2d');
  ctx.fillStyle=color1;
  ctx.beginPath();
  ctx.moveTo(size*0.25,0);
  ctx.lineTo(size*0.75,0);
  ctx.lineTo(size,size*0.25);
  ctx.lineTo(0,size*0.25);
  ctx.closePath();
  ctx.fill();
  ctx.fillStyle=color2;
  ctx.beginPath();
  ctx.moveTo(size*0.75,0);
  ctx.lineTo(size,size*0.25);
  ctx.lineTo(size,size*0.75);
  ctx.lineTo(size*0.75,size);
  ctx.closePath();
  ctx.fill();
  ctx.fillStyle=color3;
  ctx.fillRect(size*0.25,size*0.25,size*0.5,size*0.75);
  const img=new Image();
  img.src=c.toDataURL();
  return img;
}
const playerImg=createCubeSprite('#6ef0b1','#4cc79e','#3ba37a');

// project function for perspective
function project(z){
  const scale=1/(z*0.003+0.2);
  const y=canvas.height - z*0.5;
  return {scale,y};
}

function drawRoad(){
  const segments=20;
  for(let i=0;i<segments;i++){
    const z=i*50;
    const {scale,y}=project(z);
    const roadWidth=200*scale;
    ctx.fillStyle=i%2===0?'#1a2a3a':'#162135';
    ctx.beginPath();
    ctx.moveTo(canvas.width/2-roadWidth/2,y);
    ctx.lineTo(canvas.width/2+roadWidth/2,y);
    ctx.lineTo(canvas.width/2+roadWidth/2,y+50*scale);
    ctx.lineTo(canvas.width/2-roadWidth/2,y+50*scale);
    ctx.closePath();
    ctx.fill();
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  tick++;
  player.bob=Math.sin(tick*0.1)*5;

  drawRoad();

  const laneX=[canvas.width/2-50,canvas.width/2,canvas.width/2+50];
  const size=40;
  ctx.drawImage(playerImg,laneX[player.lane]-size/2,canvas.height-100+player.bob,size,size);
}

function loop(){
  if(!running) return;
  draw();
  requestAnimationFrame(loop);
}

// controls
window.addEventListener('keydown',e=>{
  if(e.key==='ArrowLeft'&&player.lane>0) player.lane--;
  if(e.key==='ArrowRight'&&player.lane<2) player.lane++;
});

loop();
</script>
</body>
</html>
